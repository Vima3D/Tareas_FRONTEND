<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clase 30.3 JAVASCRIPT</title>
    <style>

    </style>
</head>
<body>
    <h1>Ejercicios de Eventos</h1>
    <h2>Ejercicio 03</h2>
    <p>Escribe un programa que permita ordenar los elementos de una lista desordenada. Cada elemento debe tener un aspa en su extremo derecho para poder ser eliminado. Además, al final habrá un botón para añadir un elemento. El texto del nuevo elemento se le debe pedir al usuario por teclado</p>

    <h3>Lista de Nombres</h3>
    <ul id="lista">
        <li>Maria</li>
        <li>Juan</li>
        <li>Alberto</li>
        <li>Nicolás</li>
    </ul>
    <button id = ordenarBoton>Ordenar Lista</button>
    <button id="addButton">Añadir Nombre</button>
    <script>

         //Función para crear boton 'x' para un li
        function agregarBotonX(li) {
            let xButton = document.createElement('button');
            xButton.textContent = 'X';
            xButton.style.marginLeft = '8px';

            xButton.addEventListener('click', () => {
                li.remove()
            })

            li.appendChild(xButton);
        }
        
        const lista = document.getElementById('lista');
        const boton = document.getElementById('ordenarBoton');
        let lis = lista.getElementsByTagName('li')
        for (let li of lis) {
            agregarBotonX(li)
        }

        
        boton.addEventListener('click', () => {
            // Obtener los elementos <li> como un array
                const items = Array.from(lista.getElementsByTagName('li'));  
                
            // Ordenarlos alfabéticamente (ignorando mayúsculas)
            items.sort((a, b) => a.textContent.localeCompare(b.textContent));

            // Eliminar los elementos actuales de la lista
            lista.innerHTML = '';
    
            // Volver a agregarlos ordenados
            items.forEach(item => lista.appendChild(item));
        });

        const addButton = document.getElementById('addButton');

        addButton.addEventListener('click', () => {
            //Preguntar y guardar nuevo nombre en variable
            let nuevoNombre = prompt('Introduce el Nombre que deseas agregar a la lista: ')

            //Crear <li> con el nuevo nombre
            let nuevoLi = document.createElement('li');
            nuevoLi.textContent = nuevoNombre;
            agregarBotonX(nuevoLi)

            //Agregamos el nombre a la lista <ul>
            lista.appendChild(nuevoLi);
        })

    </script>
</body>
</html>